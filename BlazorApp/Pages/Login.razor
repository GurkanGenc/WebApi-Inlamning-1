@page "/login"

<h3>Login</h3>

<EditForm Model="model" OnSubmit="OnSubmit">
    <InputText type="text" id="email" @bind-Value="model.Email" />
    <InputText type="password" id="password" @bind-Value="model.Password" />
    <button class="btn btn-success" type="submit">Log In</button>
</EditForm>


@code {
    private LoginModel model { get; set; }

    protected override void OnInitialized()
    {
        model = new LoginModel();
    }

    private async Task OnSubmit()
    {
        // Saves a Http Response Message.
        var response = await Http.PostAsJsonAsync<LoginModel>("https://localhost:44397/api/Authentication/login", model);

        // Converts the Response Message to a string. 
        await sessionStorage.SetItemAsync<string>("auth", await response.Content.ReadAsStringAsync());

        // Means this page
        NavManager.NavigateTo("/");
    }


    public class LoginModel
    {
        //[Required]
        //[StringLength]
        public string Email { get; set; }

        public string Password { get; set; }
    }
}
